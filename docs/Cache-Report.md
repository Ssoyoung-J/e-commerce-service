# 📄 이커머스 인기 상품 조회 기능 성능 개선 보고서 (Redis Cache 활용)

## 1. 개요

이 보고서는 이커머스 서비스에서 인기 상품(Top N 상품) 조회 기능의 응답 속도와 시스템 부하를 개선하기 위해 **Redis 캐시**를 도입한 전략과 그 효과에 대해 기술한다. 인기 상품 데이터는 접근 빈도가 높고 갱신 주기가 상대적으로 길기 때문에 **캐싱을 통해 효율적인 응답 속도**를 제공할 수 있다.

---

## 2. 기존 구조와 문제점

- **기존 방식**: 인기 상품 조회 시마다 DB에서 주문 수, 조회 수 등의 집계 데이터를 실시간으로 계산하거나 복잡한 JOIN/집계 쿼리를 수행
- **문제 식별**
    - 반복적인 조회: 인기 상품을 조회할 때마다 데이터 베이스에 접근하는데, 이 작업이 자주 발생하며 성능, 비용 문제를 발생시킬 수 있습니다.
    - 해결책 : Redis 캐시를 사용하여 인기 상품 데이터를 캐시에 저장하고, 캐시된 데이터를 조회하여 성능을 개선합니다.


## 3. 분석
- **기존 시스템의 문제점**
  - DB에 과도한 부하 발생 (반복적인 DB 조회)
  - 평균 응답 시간 증가로 인한 사용자 경험 저하
- **캐시 적합한 데이터**
  - 인기 상품 정보 : 자주 조회되는 데이터이면서, 변경이 빈번하지 않지만 반복적으로 조회됩니다. 따라서 데이터 베이스에서 직접 조회하는 대신 Redis의 캐시 시스템에 데이터를 저장하고, 이를 사용하면 빠른 응답을 제공할 수 있습니다. 또한, 캐시 시스템을 활용함으로써, 사용자가 인기 상품 조회를 요청할 때 데이터 베이스의 부하를 줄여서 성능을 확보할 수 있습니다.

## 4. 해결책
- **Redis Cache의 Read Through**
- Cache Hit
1. 사용자가 인기 상품 조회 요청
2. Redis에서 캐시된 데이터를 조회
3. Redis에 데이터가 있으면 캐시에서 바로 사용자에게 반환
4. 사용자에게 조회된 데이터 반환
- Cache Miss
1. 사용자가 인기 상품 조회 요청
2. Redis에서 캐시된 데이터를 조회
3. Cache Miss 발생 시, DB에서 데이터 조회 
4. 사용자에게 DB에서 조회된 데이터 반환 
5. 다음 요청에 대해 Redis에서 바로 캐시 데이터 조회
- 단점 : 주로 캐시 스탬피드(Cache Stampede)와 과녈ㄴ이 있어, 캐시 미스 발생 시 여러 사용자 요청이 동시에 DB로 몰려 DB 부하와 성능 저하를 초래할 수 있습니다. 또, 캐시 갱신 시 데이터 일관성 문제가 발생할 수 있습니다.

- **Redis Cache의 Write Through**
1. 스케줄러가 주기적으로 실행되어 데이터를 갱신합니다.
2. DB에서 데이터를 조회하거나 업데이트합니다.
3. Redis 캐시를 갱신하여, DB와 캐시가 동기화됩니다.